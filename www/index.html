<!DOCTYPE html>
<html>

<head>
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>Discal Android</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-select.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-select.min.js"></script>
    <script src="js/jquery.dataTables.min.js"></script>
    <script src="js/dataTables.bootstrap.min.js"></script>
    <script src="js/bootstrap-notify.min.js"></script>
    <script src="js/discal.js"></script>
    <!-- <script src="js/sqlite-plugin.js"></script> -->


</head>
<script>
$(function () {  
    var currentTime = new Date();
    //set the date
    $("#currentDate").html(getCurrentDate());
    console.log(sessionStorage.userId);
    console.log(sessionStorage.idVendedor);
    $("#welcome").html("Bienvenido(a): " + sessionStorage.nombreVendedor + " " +  sessionStorage.apellidosVendedor);
    //TODO: set the clients assigned
    //TODO: set the zones
    //TODO: set the 

    console.log(currentTime);    
    testDB();
    // onDeviceReady();
});

    // Cordova is ready
    function onDeviceReady()
    {
        var db = window.sqlitePlugin.openDatabase("Database", "1.0", "Demo", -1);

        db.transaction(function(tx) {

            //create table
            tx.executeSql("CREATE TABLE IF NOT EXISTS demo (id integer primary key, data text, data_num integer)", [], function(tx, res){

                //insert data
                tx.executeSql("INSERT INTO demo (id, data, data_num) VALUES (?,?,?)", [1, "test", 100], function(tx,res){

                    //retrieve data
                    tx.executeSql("SELECT * FROM demo WHERE id = ?", [1], function(tx, res){
                        for(var iii = 0; iii < res.rows.length; iii++)
                        {
                            alert(res.rows.item(iii).id);
                            alert(res.rows.item(iii).data);
                            alert(res.rows.item(iii).data_num);
                            console.log(res.rows.item(iii).id);
                            console.log(res.rows.item(iii).data);
                            console.log(res.rows.item(iii).data_num);
                        }
                    })

                });

            });

        }, function(err){

            //errors for all transactions are reported here
            alert("Error: " + err.message)

        });
    }
    function testDB() {
        var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
        var msg;
        db.transaction(function (tx) { 
            var cd = getCurrentDate();
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
            tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "'+ cd + '")'); 
            tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "'+ cd + '")'); 
            msg = '<p>Log message created and row inserted.</p>'; 
            document.querySelector('#status').innerHTML =  msg; 
         })

         db.transaction(function (tx) { 
            tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) { 
               var len = results.rows.length, i; 
               msg = "<p>Found rows: " + len + "</p>"; 
               document.querySelector('#status').innerHTML +=  msg; 
      
               for (i = 0; i < len; i++) { 
                  msg = "<p><b>" + results.rows.item(i).id + " - " +results.rows.item(i).log + "</b></p>"; 
                  document.querySelector('#status').innerHTML +=  msg; 
               } 
            }, null); 
         }); 
    }
</script>
<body>
    <!-- menu var -->
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
                    aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Discal Menu</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="clientes.html">Clientes</a></li>
                    <li><a href="productos.html">Productos</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                            aria-expanded="false">
                            Pedidos <span class="sr-only">(current)</span><span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="registrado.html">Registrados</a></li>
                            <li><a href="consolidado.html">Consolidado</a></li>
                            <li><a href="nuevo_pedido.html">Nuevo Pedido <span class="sr-only">(current)</span></a></li>
                        </ul>
                    </li>
                    <li><a href="configuracion.html">Configuracion</a></li>
                    <li><a href="logout.html">Logout</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

<div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="alert alert-info" role="alert" id="welcome">
                    
                  </div>
            </div>    
        </div>
        <div class="row">
            <div class="col-xs-6">
                <div class="panel panel-primary">
                        <div class="panel-heading" style="height: 20px;padding:0; text-align: center">Fecha</div>                        
                        <div class="panel-body">      
                            <div class="card text-white bg-primary">
                                    <div class="card-body" id="currentDate"> 
                                        12
                                    </div>
                                </div>        
                        </div>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="panel panel-success">
                        <div class="panel-heading" style="height: 20px;padding:0; text-align: center">Pedidos Hoy</div>                        
                        <div class="panel-body">
                            <div class="card text-white bg-success">
                                <div class="card-body" style="height: 50px;">                                  
                                  12
                                </div>
                            </div>                            
                        </div>
                        <div class="panel-footer">
                            <a class="btn btn-xs btn-success" href="nuevo_pedido.html"><span class="glyphicon glyphicon-plus"></span></a>
                            <a class="btn btn-xs btn-success" href="registrado.html"><span class="glyphicon glyphicon-search"></span></a>
                        </div>
                </div>
            </div>
        </div>        
        <div class="row">
                <div class="col-xs-6">
                    <div class="panel panel-info">
                            <div class="panel-heading" style="height: 20px;padding:0; text-align: center">Clientes</div>                        
                            <div class="panel-body" style="height: 50px;">
                                10
                            </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="panel panel-danger">
                            <div class="panel-heading" style="height: 20px;padding:0; text-align: center">Zonas</div>
                            <div class="panel-body" style="height: 50px;">
                                12
                            </div>
                    </div>
                </div>
            </div>                    
</div>    
    <script type="text/javascript" src="js/index.js"></script>
    <!-- <script type="text/javascript" charset="utf-8" src="cordova.js"></script> -->
    <div id = "status" name = "status">Status Message</div> 
</body>

</html>